Waf: Entering directory `/home/dhruvie/ns3/ns-allinone-3.19/ns-3.19/build'
Waf: Leaving directory `/home/dhruvie/ns3/ns-allinone-3.19/ns-3.19/build'
'build' finished successfully (8.642s)
STATEMACHINE INITIALISED
DEBUG: TCP Variant Assigned
DEBUG:Two nodes were created
DEBUG: Two nodes have been connected
The initialize method of InternetStackHelper calls TCPL4protocol
here
in here
second here
third here
TcpL4Protocol:TcpL4Protocol()
Made a TcpL4Protocol 0x1fcffc0
here
in here
second here
third here
TcpL4Protocol:TcpL4Protocol()
Made a TcpL4Protocol 0x1fcd970
DEBUG: Stack layers have been loaded on the two nodes
DEBUG: IP addresses assigned to the two nodes
DEBUG: Assigned port to sink(second) node
0 [node 0] TcpL4Protocol:CreateSocket()
TcpSocketBase:TcpSocketBase(0x1fcdb70)
TcpTahoe:TcpTahoe(0x1fcdb70)
DEBUG: Create method: Object-factory -> constructor of Tcp-Tahoe -> constructor of TCP sockbase
Calls the createsocket method of TCPL4protocol for node(0)
DEBUG: Custom application installed on first (sender) node
DEBUG: start and stop time assigned for sender
DEBUG: Now the simulation will run and Socket for node 1 will be created: DEFAULT
0 [node 1] TcpL4Protocol:CreateSocket()
TcpSocketBase:TcpSocketBase(0x1fc5110)
TcpTahoe:TcpTahoe(0x1fc5110)
DEBUG: Create method: Object-factory -> constructor of Tcp-Tahoe -> constructor of TCP sockbase
 DEBUG: Inside bind now, assign an MAC address to the socket
0 [node 1] TcpSocketBase:Bind(0x1fc5110, 03-06-00:00:00:00:90:1f)
0 [node 1] TcpL4Protocol:Allocate(0x1fcd970, 8080)
0 [node 1] TcpSocketBase 0x1fc5110 got an endpoint: 0x200b5a0
0 [node 1] TcpSocketBase:SetupCallback(0x1fc5110)
0 [node 1] TcpTahoe:Listen(0x1fc5110)
0 [node 1] TcpSocketBase:Listen(0x1fc5110)
0 [node 1] TcpSocketBase:ProcessEvent(0x1fc5110, 0)
0 [node 1] Processing Event: APP_LISTEN

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c520, 0, 0)
0 [node 1] CLOSED=====>LISTEN

0 [node 1] State Transition Action: NO_ACT

0 [node 1] TcpSocketBase:ProcessAction(0x1fc5110, 0)
0 [node 1] TcpSocketBase:ShutdownSend(0x1fc5110)
1 [node 0] TcpSocketBase:Bind(0x1fcdb70)
1 [node 0] TcpL4Protocol:Allocate()
1 [node 0] TcpSocketBase:SetupCallback(0x1fcdb70)
1 [node 0] TcpTahoe:Connect(0x1fcdb70, 03-06-0a:01:01:02:90:1f)
DEBUG: cwnd was traced
Connecting to MAC address of receiver
1 [node 0] TcpSocketBase:Connect(0x1fcdb70, 03-06-0a:01:01:02:90:1f)
1 [node 0] TcpSocketBase:SetupEndpoint(0x1fcdb70)
1 [node 0] Route exists
DEBUG: Calling doconnect method from connect
1 [node 0] TcpSocketBase:DoConnect(0x1fcdb70)
Inside doconnect(): A new connection is allowed only if this socket does not have a connection
1 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 1)
1 [node 0] Processing Event: APP_CONNECT

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c480, 0, 1)
1 [node 0] CLOSED=====>SYN_SENT

1 [node 0] State Transition Action: SYN_TX

1 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 4)
1 [node 0] Action Description: Send an empty ACK packet

1 [node 0] TcpSocketBase:SendEmptyPacket(0x1fcdb70, 2)
1 [node 0] Action 1. Prepare packet by setting seq, ack no., options, flags etc. 
Action 2. Set src, dest port
Action 3. Set window size using rwind
Action 4. Schedule RETx timer and finally send the packet

1 [node 0] TcpL4Protocol 0x1fcffc0 sending seq 0 ack 0 flags 2 data size 0
1 [node 0] TcpL4Protocol:SendPacket(0x1fcffc0, 0x1fcfd10, 10.1.1.1, 10.1.1.2, 0)
1 [node 0] DEBUG: Sent the data to bottom layers. Bye Bye data


1 [node 0] Schedule retransmission timeout at time 1 to expire at time 4
1 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fcfd10)
DEBUG: Storing data in transmission buffer
1.00012 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fcc4f0)
DEBUG: Storing data in transmission buffer
1.00023 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fcc590)
DEBUG: Storing data in transmission buffer
1.00035 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc05a0)
DEBUG: Storing data in transmission buffer
1.00047 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fced60)
DEBUG: Storing data in transmission buffer
1.00058 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc04c0)
DEBUG: Storing data in transmission buffer
1.0007 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc0b50)
DEBUG: Storing data in transmission buffer
1.00082 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc54d0)
DEBUG: Storing data in transmission buffer
1.00093 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5560)
DEBUG: Storing data in transmission buffer
1.00105 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5610)
DEBUG: Storing data in transmission buffer
1.00117 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc56c0)
DEBUG: Storing data in transmission buffer
1.00128 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5770)
DEBUG: Storing data in transmission buffer
1.0014 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5820)
DEBUG: Storing data in transmission buffer
1.00152 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc58d0)
DEBUG: Storing data in transmission buffer
1.00164 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5980)
DEBUG: Storing data in transmission buffer
1.00175 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5a30)
DEBUG: Storing data in transmission buffer
1.00187 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5ae0)
DEBUG: Storing data in transmission buffer
1.00199 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5b90)
DEBUG: Storing data in transmission buffer
1.0021 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5c40)
DEBUG: Storing data in transmission buffer
1.00222 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5cf0)
DEBUG: Storing data in transmission buffer
1.00234 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5da0)
DEBUG: Storing data in transmission buffer
1.00245 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5e50)
DEBUG: Storing data in transmission buffer
1.00257 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5f00)
DEBUG: Storing data in transmission buffer
1.00269 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc5fb0)
DEBUG: Storing data in transmission buffer
1.0028 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6060)
DEBUG: Storing data in transmission buffer
1.00292 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6110)
DEBUG: Storing data in transmission buffer
1.00304 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc61c0)
DEBUG: Storing data in transmission buffer
1.00315 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6270)
DEBUG: Storing data in transmission buffer
1.00327 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6320)
DEBUG: Storing data in transmission buffer
1.00339 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc63d0)
DEBUG: Storing data in transmission buffer
1.0035 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6480)
DEBUG: Storing data in transmission buffer
1.00362 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6530)
DEBUG: Storing data in transmission buffer
1.00374 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc65e0)
DEBUG: Storing data in transmission buffer
1.00385 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6690)
DEBUG: Storing data in transmission buffer
1.00397 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6740)
DEBUG: Storing data in transmission buffer
1.00409 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc67f0)
DEBUG: Storing data in transmission buffer
1.0042 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc68a0)
DEBUG: Storing data in transmission buffer
1.00432 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6950)
DEBUG: Storing data in transmission buffer
1.00444 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6a00)
DEBUG: Storing data in transmission buffer
1.00456 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6ab0)
DEBUG: Storing data in transmission buffer
1.00467 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6b60)
DEBUG: Storing data in transmission buffer
1.00479 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6c10)
DEBUG: Storing data in transmission buffer
1.00491 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6cc0)
DEBUG: Storing data in transmission buffer
1.00502 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6d70)
DEBUG: Storing data in transmission buffer
1.00507 [node 1] TcpL4Protocol:Receive(0x1fcd970, 0x1fc6e90, tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 6 offset (bytes) 0 flags [none] length: 40 10.1.1.1 > 10.1.1.2, 0x1fcd7b0)
If you want to change the state machine table, now is the time!
in here
second here
third here
TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
1.00507 [node 1] TcpL4Protocol 0x1fcd970 receiving seq 0 ack 0 flags 2 data size 20
1.00507 [node 1] TcpL4Protocol 0x1fcd970 received a packet
1.00507 [node 1] TcpL4Protocol 0x1fcd970 forwarding up to endpoint/socket
1.00507 [node 1] Socket 0x1fc5110 forward up from PeerAdd:PeerPort  0.0.0.0:0 to LocalAdd:LocalPort0.0.0.0:8080
1.00507 [node 1] Action 1. Peel header and check flags, options and Estimate RTT
Action 2. Update Rx window
Action 3. If rwind !=0 cancel the persist timer
Action 4.Check the set flags in header and set event accordingly and process action

1.00507 [node 1] 0x1fc5110 Leaving zerowindow persist state
TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:FlagsEvent(0x1fd1860, )
1.00507 [node 1] TcpSocketBase:ProcessEvent(0x1fc5110, 6)
1.00507 [node 1] Processing Event: SYN_RX

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c3c0, 1, 6)
1.00507 [node 1] LISTEN=====>SYN_RCVD

1.00507 [node 1] State Transition Action: SYN_ACK_TX

1.00507 [node 1] Socket 0x1fc5110 processing pkt action, 5 current state 3
1.00507 [node 1] Action description: Fork a socket to handle data transmission

1.00507 [node 1] TcpSocketBase:TcpSocketBase(0x2043500)
1.00507 [node 1] Invoked the copy constructor
1.00507 [node 1] TcpTahoe:TcpTahoe(0x2043500)
1.00507 [node 1] Invoked the copy constructor
1.00507 [node 1] Cloned a TcpSocketBase 0x2043500
1.00507 [node 1] Action 1. Update count of connection retries
Action 1. Advance the next Rx Sequnce no. by 1

1.00507 [node 1] TcpL4Protocol:Allocate(0x1fcd970, 10.1.1.2, 8080, 10.1.1.1, 49153)
1.00507 [node 1] TcpSocketBase:SetupCallback(0x2043500)
1.00507 [node 1] TcpSocketBase:SendEmptyPacket(0x2043500, 18)
1.00507 [node 1] Action 1. Prepare packet by setting seq, ack no., options, flags etc. 
Action 2. Set src, dest port
Action 3. Set window size using rwind
Action 4. Schedule RETx timer and finally send the packet

1.00507 [node 1] TcpL4Protocol 0x1fcd970 sending seq 0 ack 1 flags 12 data size 0
1.00507 [node 1] TcpL4Protocol:SendPacket(0x1fcd970, 0x1fcfc50, 10.1.1.2, 10.1.1.1, 0)
1.00507 [node 1] DEBUG: Sent the data to bottom layers. Bye Bye data


1.00507 [node 1] Schedule retransmission timeout at time 1.00507 to expire at time 4.00507
1.00514 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e90)
DEBUG: Storing data in transmission buffer
1.00526 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fcfc50)
DEBUG: Storing data in transmission buffer
1.00537 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fcc450)
DEBUG: Storing data in transmission buffer
1.00549 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6fd0)
DEBUG: Storing data in transmission buffer
1.00561 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043a20)
DEBUG: Storing data in transmission buffer
1.00572 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043a90)
DEBUG: Storing data in transmission buffer
1.00584 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043b00)
DEBUG: Storing data in transmission buffer
1.00596 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043b70)
DEBUG: Storing data in transmission buffer
1.00607 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043be0)
DEBUG: Storing data in transmission buffer
1.00619 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043c50)
DEBUG: Storing data in transmission buffer
1.00631 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043cc0)
DEBUG: Storing data in transmission buffer
1.00642 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043d30)
DEBUG: Storing data in transmission buffer
1.00654 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043da0)
DEBUG: Storing data in transmission buffer
1.00666 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043e10)
DEBUG: Storing data in transmission buffer
1.00677 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043e80)
DEBUG: Storing data in transmission buffer
1.00689 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043ef0)
DEBUG: Storing data in transmission buffer
1.00701 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043f60)
DEBUG: Storing data in transmission buffer
1.00712 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2043fd0)
DEBUG: Storing data in transmission buffer
1.00724 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044040)
DEBUG: Storing data in transmission buffer
1.00736 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20440b0)
DEBUG: Storing data in transmission buffer
1.00748 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044120)
DEBUG: Storing data in transmission buffer
1.00759 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044190)
DEBUG: Storing data in transmission buffer
1.00771 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044200)
DEBUG: Storing data in transmission buffer
1.00783 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044270)
DEBUG: Storing data in transmission buffer
1.00794 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20442e0)
DEBUG: Storing data in transmission buffer
1.00806 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044350)
DEBUG: Storing data in transmission buffer
1.00818 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20443c0)
DEBUG: Storing data in transmission buffer
1.00829 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044430)
DEBUG: Storing data in transmission buffer
1.00841 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20444a0)
DEBUG: Storing data in transmission buffer
1.00853 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044510)
DEBUG: Storing data in transmission buffer
1.00864 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044580)
DEBUG: Storing data in transmission buffer
1.00876 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20445f0)
DEBUG: Storing data in transmission buffer
1.00888 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044660)
DEBUG: Storing data in transmission buffer
1.00899 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20446d0)
DEBUG: Storing data in transmission buffer
1.00911 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044740)
DEBUG: Storing data in transmission buffer
1.00923 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20447b0)
DEBUG: Storing data in transmission buffer
1.00934 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044820)
DEBUG: Storing data in transmission buffer
1.00946 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044890)
DEBUG: Storing data in transmission buffer
1.00958 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044900)
DEBUG: Storing data in transmission buffer
1.00969 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044970)
DEBUG: Storing data in transmission buffer
1.00981 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x20449e0)
DEBUG: Storing data in transmission buffer
1.00993 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044a50)
DEBUG: Storing data in transmission buffer
1.01004 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044ac0)
DEBUG: Storing data in transmission buffer
1.01013 [node 0] TcpL4Protocol:Receive(0x1fcffc0, 0x2044ba0, tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 6 offset (bytes) 0 flags [none] length: 40 10.1.1.2 > 10.1.1.1, 0x1fcf110)
If you want to change the state machine table, now is the time!
in here
second here
third here
TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
1.01013 [node 0] TcpL4Protocol 0x1fcffc0 receiving seq 0 ack 1 flags 12 data size 20
1.01013 [node 0] TcpL4Protocol 0x1fcffc0 received a packet
1.01013 [node 0] TcpL4Protocol 0x1fcffc0 forwarding up to endpoint/socket
1.01013 [node 0] Socket 0x1fcdb70 forward up from PeerAdd:PeerPort  10.1.1.2:8080 to LocalAdd:LocalPort10.1.1.1:49153
1.01013 [node 0] Action 1. Peel header and check flags, options and Estimate RTT
Action 2. Update Rx window
Action 3. If rwind !=0 cancel the persist timer
Action 4.Check the set flags in header and set event accordingly and process action

1.01013 [node 0] 0x1fcdb70 Leaving zerowindow persist state
TcpL4Protocol:FlagsEvent(0x1fd1860, )
1.01013 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 7)
1.01013 [node 0] Processing Event: SYN_ACK_RX

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c3c0, 2, 7)
1.01013 [node 0] SYN_SENT=====>ESTABLISHED

1.01013 [node 0] State Transition Action: ACK_TX_1

1.01013 [node 0] TcpSocketBase 0x1fcdb70 Connected!
1.01013 [node 0] Socket 0x1fcdb70 processing pkt action, 2 current state 4
1.01013 [node 0] Action 1. Cancel ReTx timeout and Increment Rx expected seq by 1
Action 2. Send empty ACK packet and start filling the TX buffer

1.01013 [node 0] TcpSocketBase:SendEmptyPacket(0x1fcdb70, 16)
1.01013 [node 0] Action 1. Prepare packet by setting seq, ack no., options, flags etc. 
Action 2. Set src, dest port
Action 3. Set window size using rwind
Action 4. Schedule RETx timer and finally send the packet

1.01013 [node 0] TcpL4Protocol 0x1fcffc0 sending seq 1 ack 1 flags 10 data size 0
1.01013 [node 0] TcpL4Protocol:SendPacket(0x1fcffc0, 0x1fc6e20, 10.1.1.1, 10.1.1.2, 0)
1.01013 [node 0] DEBUG: Sent the data to bottom layers. Bye Bye data


1.01013 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 14)
1.01013 [node 0] Processing Event: FORCED_TRANS

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c070, 4, 14)
1.01013 [node 0] ESTABLISHED=====>IDLE_S

1.01013 [node 0] State Transition Action: TX_DATA

1.01013 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 10)
1.01013 [node 0] Action description:Try to send pending data in Tx buffer
1.01013 [node 0] Action 1. Checks the available window size
Action 2. Sends the data as long as available window allows, (through while loop)
1.01013 [node 0] TcpSocketBase:SendPendingData(0x1fcdb70, 1)
DEBUG: LOOPING IN WHILE LOOP : 
1.01013 [node 0] TcpSocketBase:AvailableWindow()
1.01013 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01013 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01013 [node 0] UnAckCount=0, Win=536
1.01013 [node 0] TcpSocketBase 0x1fcdb70 SendPendingData rxwin 65535w536 segsize 536 nextTxSeq 1 highestRxAck 1 pd->Size 127020 pd->SFS 127020
1.01013 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 15)
1.01013 [node 0] Processing Event: CHECK_NAGLE

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930bbd0, 22, 15)
1.01013 [node 0] IDLE_S=====>SEND

1.01013 [node 0] State Transition Action: NAGLE_ACTION

1.01013 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 20)
1.01013 [node 0] Action Description:Checks the available window.
1.If window is less than segmentsize and bytes in buffer then STOP
1. If buffer has unacked data and data is less than one segment invoke Nagle algorithm

1.01013 [node 0] TcpSocketBase:AvailableWindow()
1.01013 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01013 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01013 [node 0] UnAckCount=0, Win=536
w= 536, segmentsize=536, Bytes in Txbuffer127020
1.01013 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 16)
1.01013 [node 0] Processing Event: SEND_DATA

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930bbd0, 18, 16)
1.01013 [node 0] SEND=====>IDLE_S

1.01013 [node 0] State Transition Action: SEND_DATA_ACTION

1.01013 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 21)
1.01013 [node 0] Action description:1.Send no more than the window, SDP() returns no. of bytes sent
2. Advance the next seq number to be sent

1.01013 [node 0] TcpSocketBase:AvailableWindow()
1.01013 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01013 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01013 [node 0] UnAckCount=0, Win=536
1.01013 [node 0] TcpSocketBase:SendDataPacket(0x1fcdb70, 1, 536, 1)
1.01013 [node 0] Action 1. Copy the data (seq,seq+maxsize) from Tx buffer
Action 2. Prepare a full packet.
Action 3. Add the src, dest port and set the window size using r_wind
Act 4. Schedule ReTx timeout and set the highest seq no. ever sent
1.01013 [node 0] 0x1fcdb70 SendDataPacket Schedule ReTxTimeout at time 1.01013 to expire at time 2.01013
1.01013 [node 0] Send packet via TcpL4Protocol with flags 0x10
1.01013 [node 0] TcpL4Protocol 0x1fcffc0 sending seq 1 ack 1 flags 10 data size 536
1.01013 [node 0] TcpL4Protocol:SendPacket(0x1fcffc0, 0x1fc6e20, 10.1.1.1, 10.1.1.2, 0)
1.01013 [node 0] DEBUG: Sent the data to bottom layers. Bye Bye data


DEBUG: LOOPING IN WHILE LOOP : 
1.01013 [node 0] TcpSocketBase:AvailableWindow()
1.01013 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01013 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01013 [node 0] UnAckCount=536, Win=536
1.01013 [node 0] TcpSocketBase 0x1fcdb70 SendPendingData rxwin 65535w0 segsize 536 nextTxSeq 537 highestRxAck 1 pd->Size 127020 pd->SFS 126484
1.01013 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 15)
1.01013 [node 0] Processing Event: CHECK_NAGLE

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930bbd0, 22, 15)
1.01013 [node 0] IDLE_S=====>SEND

1.01013 [node 0] State Transition Action: NAGLE_ACTION

1.01013 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 20)
1.01013 [node 0] Action Description:Checks the available window.
1.If window is less than segmentsize and bytes in buffer then STOP
1. If buffer has unacked data and data is less than one segment invoke Nagle algorithm

1.01013 [node 0] TcpSocketBase:AvailableWindow()
1.01013 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01013 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01013 [node 0] UnAckCount=536, Win=536
w= 0, segmentsize=536, Bytes in Txbuffer126484
Stopped sending. Has to wait for higher Tx window OR amount of data to be sent is < 1 segment
1.01013 [node 0] *******SENDPENDINGDATA sent 1 packets****************************************
1.01013 [node 0] TcpSocketBase:GetTxAvailable(0x1fcdb70)
1.01013 [node 0] TcpSocketBase:GetTxAvailable(0x1fcdb70)
1.01013 [node 0] TcpSocketBase:GetTxAvailable(0x1fcdb70)
1.01013 [node 0] TcpSocketBase:GetTxAvailable(0x1fcdb70)
1.01016 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fdc0)
DEBUG: Storing data in transmission buffer
1.01016 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 14)
1.01016 [node 0] Processing Event: FORCED_TRANS

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c640, 22, 14)
1.01016 [node 0] IDLE_S=====>IDLE_S

1.01016 [node 0] State Transition Action: TX_DATA

1.01016 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 10)
1.01016 [node 0] Action description:Try to send pending data in Tx buffer
1.01016 [node 0] Action 1. Checks the available window size
Action 2. Sends the data as long as available window allows, (through while loop)
1.01016 [node 0] TcpSocketBase:SendPendingData(0x1fcdb70, 1)
DEBUG: LOOPING IN WHILE LOOP : 
1.01016 [node 0] TcpSocketBase:AvailableWindow()
1.01016 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01016 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01016 [node 0] UnAckCount=536, Win=536
1.01016 [node 0] TcpSocketBase 0x1fcdb70 SendPendingData rxwin 65535w0 segsize 536 nextTxSeq 537 highestRxAck 1 pd->Size 128480 pd->SFS 127944
1.01016 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 15)
1.01016 [node 0] Processing Event: CHECK_NAGLE

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c1a0, 22, 15)
1.01016 [node 0] IDLE_S=====>SEND

1.01016 [node 0] State Transition Action: NAGLE_ACTION

1.01016 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 20)
1.01016 [node 0] Action Description:Checks the available window.
1.If window is less than segmentsize and bytes in buffer then STOP
1. If buffer has unacked data and data is less than one segment invoke Nagle algorithm

1.01016 [node 0] TcpSocketBase:AvailableWindow()
1.01016 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01016 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01016 [node 0] UnAckCount=536, Win=536
w= 0, segmentsize=536, Bytes in Txbuffer127944
Stopped sending. Has to wait for higher Tx window OR amount of data to be sent is < 1 segment
1.01016 [node 0] *******SENDPENDINGDATA sent 0 packets****************************************
1.01028 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x2044ba0)
DEBUG: Storing data in transmission buffer
1.01028 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 14)
1.01028 [node 0] Processing Event: FORCED_TRANS

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c640, 22, 14)
1.01028 [node 0] IDLE_S=====>IDLE_S

1.01028 [node 0] State Transition Action: TX_DATA

1.01028 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 10)
1.01028 [node 0] Action description:Try to send pending data in Tx buffer
1.01028 [node 0] Action 1. Checks the available window size
Action 2. Sends the data as long as available window allows, (through while loop)
1.01028 [node 0] TcpSocketBase:SendPendingData(0x1fcdb70, 1)
DEBUG: LOOPING IN WHILE LOOP : 
1.01028 [node 0] TcpSocketBase:AvailableWindow()
1.01028 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01028 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01028 [node 0] UnAckCount=536, Win=536
1.01028 [node 0] TcpSocketBase 0x1fcdb70 SendPendingData rxwin 65535w0 segsize 536 nextTxSeq 537 highestRxAck 1 pd->Size 129940 pd->SFS 129404
1.01028 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 15)
1.01028 [node 0] Processing Event: CHECK_NAGLE

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c1a0, 22, 15)
1.01028 [node 0] IDLE_S=====>SEND

1.01028 [node 0] State Transition Action: NAGLE_ACTION

1.01028 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 20)
1.01028 [node 0] Action Description:Checks the available window.
1.If window is less than segmentsize and bytes in buffer then STOP
1. If buffer has unacked data and data is less than one segment invoke Nagle algorithm

1.01028 [node 0] TcpSocketBase:AvailableWindow()
1.01028 [node 0] TcpSocketBase:UnAckDataCount(0x1fcdb70)
DEBUG: Inside TCPtahoe window method
1.01028 [node 0] TcpTahoe:Window(0x1fcdb70)
1.01028 [node 0] UnAckCount=536, Win=536
w= 0, segmentsize=536, Bytes in Txbuffer129404
Stopped sending. Has to wait for higher Tx window OR amount of data to be sent is < 1 segment
1.01028 [node 0] *******SENDPENDINGDATA sent 0 packets****************************************
1.0104 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01051 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01063 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01075 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01086 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01098 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0111 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01121 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01133 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01145 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01156 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01168 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0118 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01191 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01203 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01215 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01226 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01238 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0125 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01261 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01273 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01285 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01296 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01308 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0132 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01332 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01343 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01355 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01367 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01378 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0139 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01402 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01413 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01425 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01437 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01448 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0146 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01472 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01483 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01495 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01507 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01518 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0152 [node 1] TcpL4Protocol:Receive(0x1fcd970, 0x204fe30, tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 1 protocol 6 offset (bytes) 0 flags [none] length: 40 10.1.1.1 > 10.1.1.2, 0x1fcd7b0)
If you want to change the state machine table, now is the time!
in here
second here
third here
TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
1.0152 [node 1] TcpL4Protocol 0x1fcd970 receiving seq 1 ack 1 flags 10 data size 20
1.0152 [node 1] TcpL4Protocol 0x1fcd970 received a packet
1.0152 [node 1] TcpL4Protocol 0x1fcd970 forwarding up to endpoint/socket
1.0152 [node 1] Socket 0x2043500 forward up from PeerAdd:PeerPort  10.1.1.1:49153 to LocalAdd:LocalPort10.1.1.2:8080
1.0152 [node 1] Action 1. Peel header and check flags, options and Estimate RTT
Action 2. Update Rx window
Action 3. If rwind !=0 cancel the persist timer
Action 4.Check the set flags in header and set event accordingly and process action

TcpL4Protocol:FlagsEvent(0x1fd1860, )
1.0152 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 5)
1.0152 [node 1] Processing Event: ACK_RX

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c3c0, 3, 5)
1.0152 [node 1] SYN_RCVD=====>ESTABLISHED

1.0152 [node 1] State Transition Action: SERV_NOTIFY

1.0152 [node 1] Socket 0x2043500 processing pkt action, 15 current state 4
1.0152 [node 1] TcpSocketBase 0x2043500 Action SERV_NOTIFY
1.0152 [node 1] TcpSocketBase 0x2043500 Connected!
1.0152 [node 1] TcpSocketBase:Notify_sender(0x2043500, 49153 > 8080 [ ACK ] Seq=1 Ack=1 Win=65535)
1.0152 [node 1] TcpSocketBase:ReceivedAck(0x2043500, 49153 > 8080 [ ACK ] Seq=1 Ack=1 Win=65535)
1.0152 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 21)
1.0152 [node 1] Processing Event: ACK_CHECK

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930bbf0, 4, 21)
1.0152 [node 1] ESTABLISHED=====>IDLE_R

1.0152 [node 1] State Transition Action: ACK_CHECK_ACTION

1.0152 [node 1] Action description:1. Ignore if no ACK flag
2. Ignore if old ACK
3. Check if Dup ACK

1.0152 [node 1] TcpSocketBase:GetTxAvailable(0x2043500)
1.0152 [node 1] TcpSocketBase:GetTxAvailable(0x2043500)
1.0153 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01542 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01553 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01565 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01577 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01588 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.016 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01612 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x204fb60)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01613 [node 1] TcpL4Protocol:Receive(0x1fcd970, 0x204fe30, tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 2 protocol 6 offset (bytes) 0 flags [none] length: 576 10.1.1.1 > 10.1.1.2, 0x1fcd7b0)
If you want to change the state machine table, now is the time!
in here
second here
third here
TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
1.01613 [node 1] TcpL4Protocol 0x1fcd970 receiving seq 1 ack 1 flags 10 data size 556
1.01613 [node 1] TcpL4Protocol 0x1fcd970 received a packet
1.01613 [node 1] TcpL4Protocol 0x1fcd970 forwarding up to endpoint/socket
1.01613 [node 1] Socket 0x2043500 forward up from PeerAdd:PeerPort  10.1.1.1:49153 to LocalAdd:LocalPort10.1.1.2:8080
1.01613 [node 1] Action 1. Peel header and check flags, options and Estimate RTT
Action 2. Update Rx window
Action 3. If rwind !=0 cancel the persist timer
Action 4.Check the set flags in header and set event accordingly and process action

TcpL4Protocol:FlagsEvent(0x1fd1860, )
1.01613 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 5)
1.01613 [node 1] Processing Event: ACK_RX

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c3c0, 23, 5)
1.01613 [node 1] IDLE_R=====>IDLE_R

1.01613 [node 1] State Transition Action: NEW_ACK

1.01613 [node 1] Socket 0x2043500 processing pkt action, 8 current state 23
1.01613 [node 1] TcpSocketBase:ReceivedAck(0x2043500, 49153 > 8080 [ ACK ] Seq=1 Ack=1 Win=65535)
1.01613 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 21)
1.01613 [node 1] Processing Event: ACK_CHECK

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930be80, 23, 21)
1.01613 [node 1] IDLE_R=====>IDLE_R

1.01613 [node 1] State Transition Action: ACK_CHECK_ACTION

1.01613 [node 1] Action description:1. Ignore if no ACK flag
2. Ignore if old ACK
3. Check if Dup ACK

THE ACK HAD DATA PIGGYBACKED
1.01613 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 24)
1.01613 [node 1] Processing Event: DATA_RECV

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930be80, 23, 24)
1.01613 [node 1] IDLE_R=====>DATA_RECEIVED

1.01613 [node 1] State Transition Action: DATA_RECEIVED_ACTION

1.01613 [node 1] Action description: Call the function to take care Event: DATA_RECV

1.01613 [node 1] Action 1: Puts the data in the Rx buffer
Action 2: Notify the app of data reception

1.01613 [node 1] TcpSocketBase:ReceivedData(0x2043500, 49153 > 8080 [ ACK ] Seq=1 Ack=1 Win=65535)
1.01613 [node 1] seq 1 ack 1 pkt size 536
1.01613 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 19)
1.01613 [node 1] Processing Event: CHECK_RX_BUFFER

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930b930, 13, 19)
1.01613 [node 1] DATA_RECEIVED=====>CHECK_REC

1.01613 [node 1] State Transition Action: RX_BUFFER_ACTIONS

1.01613 [node 1] Action 1: Checks if buffer is full or not
Action 2. Send ACK for all received data
Check something and schedule delayed ACK?

1.01613 [node 1] TcpSocketBase:SendEmptyPacket(0x2043500, 16)
1.01613 [node 1] Action 1. Prepare packet by setting seq, ack no., options, flags etc. 
Action 2. Set src, dest port
Action 3. Set window size using rwind
Action 4. Schedule RETx timer and finally send the packet

1.01613 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 14)
1.01613 [node 1] Processing Event: FORCED_TRANS

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930b200, 20, 14)
1.01613 [node 1] CHECK_REC=====>SCHEDULE_ACK

1.01613 [node 1] State Transition Action: NO_ACT

1.01613 [node 1] TcpSocketBase:ProcessAction(0x2043500, 0)
1.01613 [node 1] TcpL4Protocol 0x1fcd970 sending seq 1 ack 537 flags 10 data size 0
1.01613 [node 1] TcpL4Protocol:SendPacket(0x1fcd970, 0x204fb60, 10.1.1.2, 10.1.1.1, 0)
1.01613 [node 1] DEBUG: Sent the data to bottom layers. Bye Bye data


1.01613 [node 1] TcpSocketBase:ProcessEvent(0x2043500, 17)
1.01613 [node 1] Processing Event: NOTIFY_APP

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930b930, 19, 17)
1.01613 [node 1] SCHEDULE_ACK=====>IDLE_R

1.01613 [node 1] State Transition Action: NOTIFY_APP_ACTION

1.01613 [node 1] Action description: Called because data was received. 1. Notify app that some data has been received
2. If FIN was received last, then check if all data has been received and Peer Close

1.01613 [node 1] TcpSocketBase:RecvFrom(0x2043500, 4294967295, 0)
1.01613 [node 1] TcpSocketBase:Recv(0x2043500)
1.01613 [node 1] TcpSocketBase:RecvFrom(0x2043500, 4294967295, 0)
1.01613 [node 1] TcpSocketBase:Recv(0x2043500)
1.01624 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01635 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01647 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01659 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0167 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01682 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01694 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01705 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01717 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01729 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0174 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01752 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01764 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01775 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01787 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01799 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0181 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01822 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01834 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01845 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01857 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01869 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.0188 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01892 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01904 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01916 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01927 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01939 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01951 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01962 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01974 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01986 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.01997 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02009 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02021 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02032 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02044 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02056 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02067 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02079 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02091 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02102 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02114 [node 0] TcpSocketBase:Send(0x1fcdb70, 0x1fc6e20)
DEBUG: Storing data in transmission buffer
inside mtxbuffer : BUFFER FULL
1.02119 [node 0] TcpL4Protocol:Receive(0x1fcffc0, 0x204fe30, tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 1 protocol 6 offset (bytes) 0 flags [none] length: 40 10.1.1.2 > 10.1.1.1, 0x1fcf110)
If you want to change the state machine table, now is the time!
in here
second here
third here
TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
1.02119 [node 0] TcpL4Protocol 0x1fcffc0 receiving seq 1 ack 537 flags 10 data size 20
1.02119 [node 0] TcpL4Protocol 0x1fcffc0 received a packet
1.02119 [node 0] TcpL4Protocol 0x1fcffc0 forwarding up to endpoint/socket
1.02119 [node 0] Socket 0x1fcdb70 forward up from PeerAdd:PeerPort  10.1.1.2:8080 to LocalAdd:LocalPort10.1.1.1:49153
1.02119 [node 0] Action 1. Peel header and check flags, options and Estimate RTT
Action 2. Update Rx window
Action 3. If rwind !=0 cancel the persist timer
Action 4.Check the set flags in header and set event accordingly and process action

1.02119 [node 0] TcpSocketBase:EstimateRtt(0x1fcdb70, +11059198.0ns)
TcpL4Protocol:FlagsEvent(0x1fd1860, )
1.02119 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 5)
1.02119 [node 0] Processing Event: ACK_RX

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930c3c0, 22, 5)
1.02119 [node 0] IDLE_S=====>IDLE_S

1.02119 [node 0] State Transition Action: NEW_ACK

1.02119 [node 0] Socket 0x1fcdb70 processing pkt action, 8 current state 22
1.02119 [node 0] TcpSocketBase:ReceivedAck(0x1fcdb70, 8080 > 49153 [ ACK ] Seq=1 Ack=537 Win=65535)
1.02119 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 21)
1.02119 [node 0] Processing Event: ACK_CHECK

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930be80, 22, 21)
1.02119 [node 0] IDLE_S=====>IDLE_S

1.02119 [node 0] State Transition Action: ACK_CHECK_ACTION

1.02119 [node 0] Action description:1. Ignore if no ACK flag
2. Ignore if old ACK
3. Check if Dup ACK

1.02119 [node 0] New ack of 537
RTT estimated, window updates, options read
1.02119 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 14)
1.02119 [node 0] Processing Event: FORCED_TRANS

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930be80, 12, 14)
1.02119 [node 0] RECEIVED_ACK=====>IDLE_S

1.02119 [node 0] State Transition Action: SS_CWND1

1.02119 [node 0] Action Description: Update cwnd and ssthresh
In NewAck. Do you want to change the coefficients?
beta1: 0, beta2: 0, beta3: 0, beta4: 0, beta5: 0, beta6: 0
alpha1: 1, alpha2: 0, alpha3: 0, alpha4: 1, alpha5: 0, alpha6: 1
K_ss2K_ca1/8
1.02119 [node 0] TcpTahoe:NewAck(0x1fcdb70, 537)
1.02119 [node 0] TcpTahoe receieved ACK for seq 537 cwnd 536 ssthresh 65535
DEBUG: cwnd was traced
1.02119 [node 0] In SlowStart, updated to cwnd 1608 ssthresh 65535
1.02119 [node 0] TcpSocketBase:NewAck(0x1fcdb70, 537)
1.02119 [node 0] Action 1: Set RTO
Action 2: Check persist state
Action 3:Discard data up to but not including this sequence number
Action 4: Notify app of data ,Sendpending data

1.02119 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 22)
1.02119 [node 0] Processing Event: SET_RTO

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930b980, 22, 22)
1.02119 [node 0] IDLE_S=====>LAST_STATE

1.02119 [node 0] State Transition Action: LAST_ACTION

1.02119 [node 0] TcpSocketBase:ProcessAction(0x1fcdb70, 29)
1.02119 [node 0] TcpSocketBase 0x1fcdb70 Action LAST_ACTION
1.02119 [node 0] TCP 0x1fcdb70 NewAck 537 numberAck 536
1.02119 [node 0] TcpSocketBase:ProcessEvent(0x1fcdb70, 14)
1.02119 [node 0] Processing Event: FORCED_TRANS

TcpL4Protocol:TcpStateMachine()
STATEMACHINE INITIALISED
TcpL4Protocol:Lookup(0x7ffd2930b980, 24, 14)
